# @generated by autocargo from //eden/scm/lib/util:util

[package]
name = "sapling-util"
version = "0.1.0"
authors = ["Meta Source Control Team <sourcecontrol-dev@meta.com>"]
edition = "2024"
description = "Misc utilities used by Sapling."
homepage = "https://sapling-scm.com/"
repository = "https://github.com/facebook/sapling"
license = "MIT"

[lib]
name = "util"

[dependencies]
anyhow = "1.0.98"
dirs = "6.0"
fn-error-context = "0.2"
fs-err = { version = "3", features = ["tokio"] }
fs2 = "0.4"
once_cell = "1.21"
rand = { version = "0.9", features = ["small_rng"] }
sapling-atomicfile = { version = "0.1.0", path = "../atomicfile" }
sapling-lazystr = { version = "0.1.0", path = "../lazystr" }
sapling-metrics = { version = "0.1.0", path = "../metrics" }
sapling-rewrite-macros = { version = "0.1.0", path = "rewrite-macros" }
shellexpand = "2.1.2"
thiserror = "2.0.12"
tracing = { version = "0.1.41", features = ["attributes", "valuable"] }

[dev-dependencies]
memmap2 = "0.9.5"
tempfile = "3.22"

[target.'cfg(target_os = "linux")'.dependencies]
libc = "0.2.139"
nix = { version = "0.30.1", features = ["dir", "event", "hostname", "inotify", "ioctl", "mman", "mount", "net", "poll", "ptrace", "reboot", "resource", "sched", "signal", "term", "time", "user", "zerocopy"] }
tempfile = "3.22"

[target.'cfg(target_os = "macos")'.dependencies]
libc = "0.2.139"
nix = { version = "0.30.1", features = ["dir", "event", "hostname", "inotify", "ioctl", "mman", "mount", "net", "poll", "ptrace", "reboot", "resource", "sched", "signal", "term", "time", "user", "zerocopy"] }
tempfile = "3.22"

[target.'cfg(target_os = "windows")'.dependencies]
widestring = "1.0.2"
winapi = { version = "0.3", features = ["fileapi", "handleapi", "winbase", "winerror", "winnt"] }

[target.'cfg(target_os = "windows")'.dev-dependencies]
tempfile = "3.22"
