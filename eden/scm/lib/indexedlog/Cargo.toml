# @generated by autocargo from //eden/scm/lib/indexedlog:[indexedlog,low_fileno_limit_test]

[package]
name = "sapling-indexedlog"
version = "0.1.0"
authors = ["Meta Source Control Team <sourcecontrol-dev@meta.com>"]
edition = "2024"
description = "Append-only on-disk storage with integrity checks and radix tree indexing."
homepage = "https://sapling-scm.com/"
repository = "https://github.com/facebook/sapling"
license = "MIT"

[lib]
name = "indexedlog"

[[test]]
name = "low_fileno_limit_test"
path = "tests/low_fileno_limit.rs"

[[bench]]
name = "index"
harness = false

[[bench]]
name = "log"
harness = false

[[bench]]
name = "misc"
harness = false

[dependencies]
byteorder = "1.5"
fs2 = "0.4"
memmap2 = "0.9.5"
once_cell = "1.21"
rand = { version = "0.8", features = ["small_rng"] }
sapling-atomicfile = { version = "0.1.0", path = "../atomicfile" }
sapling-configmodel = { version = "0.1.0", path = "../config/model", optional = true }
sapling-minibytes = { version = "0.1.0", path = "../minibytes" }
sapling-vlqencoding = { version = "0.1.0", path = "../vlqencoding" }
tempfile = "3.15"
tracing = { version = "0.1.41", features = ["attributes", "valuable"] }
twox-hash = "1.6.1"

[dev-dependencies]
quickcheck = "1.0"
rand_chacha = "0.3"
sapling-dev-logger = { version = "0.1.0", path = "../dev-logger" }
sapling-fsinfo = { version = "0.1.0", path = "../fsinfo" }
sapling-minibench = { version = "0.1.0", path = "../minibench" }

[target.'cfg(target_os = "linux")'.dependencies]
hex = { version = "0.4.3", features = ["alloc"] }
libc = "0.2.139"
sapling-btrfs = { version = "0.1.0", path = "../util/btrfs", optional = true }

[target.'cfg(target_os = "linux")'.dev-dependencies]
tempfile = "3.15"

[target.'cfg(target_os = "macos")'.dependencies]
hex = { version = "0.4.3", features = ["alloc"] }
libc = "0.2.139"

[target.'cfg(target_os = "macos")'.dev-dependencies]
tempfile = "3.15"

[target.'cfg(target_os = "windows")'.dependencies]
winapi = { version = "0.3", features = ["everything", "std"] }

[features]
btrfs = ["sapling-btrfs"]
configurable = ["sapling-configmodel"]
sigbus-handler = []
