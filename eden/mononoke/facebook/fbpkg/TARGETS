load("//eden/mononoke/facebook/fbpkg:lib.bzl", "mononoke_fbpkg")

oncall("mononoke")

mononoke_fbpkg(
    name = "mononoke.server",
    path_actions = {
        "config": "fbcode//eden/mononoke/facebook/config:config",
        "mononoke": "fbcode//eden/mononoke:mononoke",
    },
)

mononoke_fbpkg(
    name = "mononoke.scs_server",
    path_actions = {
        "scs_server": "fbcode//eden/mononoke/scs_server:scs_server",
    },
)

mononoke_fbpkg(
    name = "mononoke.admin",
    compress_type = None,
    path_actions = {
        "admin": "//eden/mononoke:admin",
        "newadmin": "//eden/mononoke/tools/admin:newadmin",
    },
)

mononoke_fbpkg(
    name = "mononoke.backfill_derived_data",
    path_actions = {
        "backfill_derived_data": "//eden/mononoke:backfill_derived_data",
    },
)

mononoke_fbpkg(
    name = "mononoke.blobpacker",
    compress_type = None,
    path_actions = {
        "mononoke_pack_similar_blobs_download.par": "//eden/mononoke/facebook/mononoke_pack_similar_blobs_download:hive_similar_blobs_downloader",
        "packer": "//eden/mononoke:packer",
    },
)

mononoke_fbpkg(
    name = "mononoke.blobstore_healer",
    path_actions = {
        "blobstore_healer": "//eden/mononoke:blobstore_healer",
    },
)

mononoke_fbpkg(
    name = "mononoke.hg-sync-job",
    path_actions = {
        "mononoke_hg_sync_job": "//eden/mononoke/mononoke_hg_sync_job:mononoke_hg_sync_job",
    },
)

mononoke_fbpkg(
    name = "mononoke.lfs_server",
    path_actions = {
        "lfs_server": "//eden/mononoke/lfs_server:lfs_server",
    },
)

mononoke_fbpkg(
    name = "mononoke.megarepo_async_requests_worker",
    path_actions = {
        "async_requests_worker": "//eden/mononoke/megarepo_api:async_requests_worker",
    },
)

mononoke_fbpkg(
    name = "mononoke.megarepotool",
    path_actions = {
        "megarepotool": "//eden/mononoke/commit_rewriting/megarepo:megarepotool",
    },
)

mononoke_fbpkg(
    name = "mononoke.microwave",
    compress_type = None,
    path_actions = {
        "builder": "//eden/mononoke/microwave:builder",
    },
)

mononoke_fbpkg(
    name = "mononoke.new_streaming_clone",
    path_actions = {
        "new_streaming_clone": "//eden/mononoke/streaming_clone:new_streaming_clone",
    },
)

mononoke_fbpkg(
    name = "mononoke.segmented_changelog_tailer",
    path_actions = {
        "segmented_changelog_tailer": "//eden/mononoke:segmented_changelog_tailer",
    },
)

mononoke_fbpkg(
    name = "mononoke.sqlblob_gc",
    compress_type = None,
    path_actions = {
        "sqlblob_gc": "//eden/mononoke:sqlblob_gc",
        "sqlblob_gc_py.par": "//eden/mononoke/facebook/sqlblob_gc_py:sqlblob_gc_py",
    },
)

mononoke_fbpkg(
    name = "mononoke.statistics_collector",
    path_actions = {
        "statistics_collector": "//eden/mononoke:statistics_collector",
    },
)

mononoke_fbpkg(
    name = "mononoke.streaming_clone_warmup",
    path_actions = {
        "streaming_clone_warmup": "//eden/mononoke:streaming_clone_warmup",
    },
)

mononoke_fbpkg(
    name = "mononoke.walker",
    path_actions = {
        "walker": "//eden/mononoke/walker:walker",
    },
)

mononoke_fbpkg(
    name = "mononoke.x-repo-backsync",
    path_actions = {
        "backsyncer_cmd": "//eden/mononoke/commit_rewriting/backsyncer:backsyncer_cmd",
    },
)

mononoke_fbpkg(
    name = "mononoke.x-repo-bookmarks-validator",
    path_actions = {
        "bookmarks_validator": "//eden/mononoke/commit_rewriting/bookmarks_validator:bookmarks_validator",
    },
)

mononoke_fbpkg(
    name = "mononoke.x-repo-commit-validator",
    path_actions = {
        "commit_validator": "//eden/mononoke/commit_rewriting/commit_validator:commit_validator",
    },
)

mononoke_fbpkg(
    name = "mononoke.x-repo-sync-job",
    path_actions = {
        "mononoke_x_repo_sync_job": "//eden/mononoke/commit_rewriting/mononoke_x_repo_sync_job:mononoke_x_repo_sync_job",
    },
)

mononoke_fbpkg(
    name = "mononoke.example_commit_tailer",
    compress_type = None,
    override_log_paths = ["eden/mononoke/facebook/post_commit_tailer"],
    path_actions = {
        "example_commit_tailer.par": "//eden/mononoke/facebook/post_commit_tailer:example_commit_tailer",
        "swift": "//scribeutil/swift:swift",
    },
)

mononoke_fbpkg(
    name = "mononoke.fbsource_commit_tailer",
    compress_type = None,
    override_log_paths = [
        "eden/mononoke/facebook/post_commit_tailer",
        "eden/mononoke/facebook/fbsource_commit_tailer",
    ],
    path_actions = {
        "fbsource_commit_tailer.par": "//eden/mononoke/facebook/fbsource_commit_tailer:fbsource_commit_tailer",
        "swift": "//scribeutil/swift:swift",
    },
)

mononoke_fbpkg(
    name = "mononoke.locked_repo_reporter",
    compress_type = None,
    override_log_paths = ["eden/mononoke/facebook/locked_repo_reporter"],
    path_actions = {
        "locked_repo_reporter.par": "//eden/mononoke/facebook/locked_repo_reporter:locked_repo_reporter",
    },
)

mononoke_fbpkg(
    name = "mononoke.review-bookmarks",
    compress_type = None,
    override_log_paths = ["eden/mononoke/facebook/monitoring"],
    path_actions = {
        "listserverbookmarks": "//eden/mononoke/facebook/monitoring:listserverbookmarks",
        "review-bookmarks.par": "//eden/mononoke/facebook/monitoring:review-bookmarks",
    },
)

mononoke_fbpkg(
    name = "mononoke.backfill_bonsai_blob_mapping",
    compress_type = None,
    path_actions = {
        "backfill_bonsai_blob_mapping": "//eden/mononoke/tools/facebook/backfill_bonsai_blob_mapping:backfill_bonsai_blob_mapping",
    },
)
