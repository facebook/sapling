"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([["8671"],{16838:function(e,n,t){t.r(n),t.d(n,{metadata:()=>o,contentTitle:()=>l,default:()=>m,assets:()=>c,toc:()=>h,frontMatter:()=>r});var o=JSON.parse('{"id":"addons/isl","title":"Interactive Smartlog (ISL)","description":"Interactive Smartlog (ISL) is a web-based, graphical interface for working with your Sapling smartlog. It is available as part of Sapling Web, which you can launch from the command line as follows:","source":"@site/docs/addons/isl.md","sourceDirName":"addons","slug":"/addons/isl","permalink":"/docs/addons/isl","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/sapling/tree/main/website/docs/addons/isl.md","tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Add-ons","permalink":"/docs/category/add-ons"},"next":{"title":"Visual Studio extension","permalink":"/docs/addons/vs"}}'),i=t("85893"),s=t("50065"),a=t("26702");let r={sidebar_position:10},l="Interactive Smartlog (ISL)",c={},h=[{value:"What can you do with ISL?",id:"what-can-you-do-with-isl",level:2},{value:"Working with commits and stacks",id:"working-with-commits-and-stacks",level:3},{value:"Running commands",id:"running-commands",level:3},{value:"Making commits and amending",id:"making-commits-and-amending",level:3},{value:"Interacting with code review",id:"interacting-with-code-review",level:3},{value:"Resolving merge conflicts",id:"resolving-merge-conflicts",level:3},{value:"Comparing changes",id:"comparing-changes",level:3},{value:"Speeding up change detection with Watchman",id:"speeding-up-change-detection-with-watchman",level:2},{value:"Connecting to ISL running on another machine",id:"connecting-to-isl-running-on-another-machine",level:2},{value:"Host with available ports",id:"host-with-available-ports",level:3},{value:"Host with no available ports",id:"host-with-no-available-ports",level:3}];function d(e){let n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"interactive-smartlog-isl",children:"Interactive Smartlog (ISL)"})}),"\n",(0,i.jsx)(n.p,{children:"Interactive Smartlog (ISL) is a web-based, graphical interface for working with your Sapling smartlog. It is available as part of Sapling Web, which you can launch from the command line as follows:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sl web\n"})}),"\n",(0,i.jsx)(n.p,{children:"By default, this will start the Sapling Web server and open the UI in a local browser."}),"\n",(0,i.jsxs)(n.p,{children:["See the docs for the ",(0,i.jsx)(a.Xj,{name:"web"})," command for the full set of options."]}),"\n",(0,i.jsx)(a.RJ,{alt:"ISL Overview",light:"/img/isl/isl_overview_light.png",dark:"/img/isl/isl_overview_dark.png"}),"\n",(0,i.jsx)(n.h2,{id:"what-can-you-do-with-isl",children:"What can you do with ISL?"}),"\n",(0,i.jsxs)(n.p,{children:["As the name suggests, Interactive Smartlog is an ",(0,i.jsx)(n.em,{children:"interactive"})," form of the ",(0,i.jsx)(n.em,{children:"smartlog"})," command.\nISL shows you a tree of your commits, with each commit including information about Pull Requests, bookmarks, and more.\nRather than typing commit hashes, you can directly click on commits to interact with them.\nFor example, rebasing a commit is as simple as dragging and dropping."]}),"\n",(0,i.jsx)(n.p,{children:"While ISL doesn't provide every single feature of the Sapling CLI, it is designed to\nsimplify everyday workflows and provide an extremely clear picture of your local changes,\nwhich is often all that's needed."}),"\n",(0,i.jsx)(n.h3,{id:"working-with-commits-and-stacks",children:"Working with commits and stacks"}),"\n",(0,i.jsxs)(n.p,{children:["The main commit tree in ISL has an indicator that says ",(0,i.jsx)(n.strong,{children:"You are here"}),", showing\nwhich commit you are currently on.\nYou can go to different commits by hovering on them and clicking ",(0,i.jsx)(n.code,{children:"Goto"})," to run ",(0,i.jsx)(a.mY,{name:"goto",linkText:"sl goto"}),"."]}),"\n",(0,i.jsx)(a.RJ,{alt:"Go to commits",light:"/img/isl/goto_light.png",dark:"/img/isl/goto_dark.png"}),"\n",(0,i.jsxs)(n.p,{children:["As you create new commits, they will be created on top of each other, forming ",(0,i.jsx)(n.em,{children:"stacks"}),".\nThis is similar to branches in Git.\nA commit can also have more than one commit stacked on top of it."]}),"\n",(0,i.jsx)(n.p,{children:"You can drag and drop commits to rebase them. This is the easiest way to re-arrange commits and manipulate stacks."}),"\n",(0,i.jsx)(a.nk,{src:"/img/isl/drag_and_drop_rebase_light.mov"}),"\n",(0,i.jsx)(n.p,{children:"Note that drag-and-drop rebasing is not allowed while you have uncommitted changes, since it's harder to deal with merge conflicts.\nCommit any uncommitted changes first to work around this."}),"\n",(0,i.jsxs)(n.p,{children:["Drag-and-drop performs a ",(0,i.jsx)(a.mY,{name:"rebase",linkText:"sl rebase"}),", including all commits stacked on top of the commit being dragged. If you want to re-arrange commits within your stack, consider using ",(0,i.jsx)(n.a,{href:"/docs/commands/histedit",children:(0,i.jsx)(n.code,{children:"sl histedit"})}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"running-commands",children:"Running commands"}),"\n",(0,i.jsxs)(n.p,{children:["Buttons in ISL run Sapling commands for you.\nFor example, there is a ",(0,i.jsx)(a.mY,{name:"pull",linkText:"Pull"})," button at the top left to pull the latest changes from upstream."]}),"\n",(0,i.jsx)(n.p,{children:"While a command is running, you will see progress information at the bottom of the screen.\nThis is also where you can see error messages if something goes wrong when running a command.\nISL shows the arguments used to run commands, so you could replicate the behavior on the CLI if you want to."}),"\n",(0,i.jsx)(a.RJ,{alt:"Command Progress",light:"/img/isl/command_progress_light.png",dark:"/img/isl/command_progress_dark.png"}),"\n",(0,i.jsxs)(n.p,{children:["Some commands like ",(0,i.jsx)(a.Xj,{name:"status"})," will run automatically in the background to fetch data so the UI is always up to date."]}),"\n",(0,i.jsxs)(n.p,{children:["Commands will automatically queue up to be run as you interact with the UI. ISL allows you to continue to perform additional actions\nwhile previous commands are running or queued up. This is kind of like chaining together commands on the CLI: ",(0,i.jsx)(n.code,{children:"sl pull && sl rebase main && sl goto main"}),".\nSimilar to ",(0,i.jsx)(n.code,{children:"&&"})," on the CLI, if any command along the way fails or hits merge conflicts, all further queued commands will be cancelled."]}),"\n",(0,i.jsx)(n.h3,{id:"making-commits-and-amending",children:"Making commits and amending"}),"\n",(0,i.jsxs)(n.p,{children:["Changes to files in your working copy appear automatically in ISL,\njust like if you had run ",(0,i.jsx)(a.Xj,{name:"status"}),".\nThe color and icon next to files shows you if a file was modified, added, or removed. You can click on files to open them in your Operating System's\ndefault program for that file type."]}),"\n",(0,i.jsx)(a.RJ,{alt:"Uncommitted Changes",light:"/img/isl/uncommitted_changes_light.png",dark:"/img/isl/uncommitted_changes_dark.png"}),"\n",(0,i.jsxs)(n.p,{children:["Underneath your uncommitted changes, there's a ",(0,i.jsx)(n.strong,{children:"Commit"})," button and an ",(0,i.jsx)(n.strong,{children:"Amend"})," button.\n",(0,i.jsx)(n.strong,{children:"Commit"})," will create a new commit out of your changes.\n",(0,i.jsx)(n.strong,{children:"Amend"})," will update the previous commit with your newest changes."]}),"\n",(0,i.jsxs)(n.p,{children:["When hovering on these buttons, you'll see there's also additional ",(0,i.jsx)(n.strong,{children:"Commit as..."})," and ",(0,i.jsx)(n.strong,{children:"Amend as..."})," buttons to first write or update\nthe commit message before running commit/amend. Clicking these buttons opens up the commit form sidebar on the right side,\nwhere you can write a detailed commit message. When you're satisfied with your message, the ",(0,i.jsx)(n.em,{children:"Commit"})," and ",(0,i.jsx)(n.em,{children:"Amend"})," buttons at the bottom right will\nlet you create or amend your commit using your message."]}),"\n",(0,i.jsx)(a.RJ,{alt:"Commit Form",light:"/img/isl/commit_as_light.png",dark:"/img/isl/commit_as_dark.png"}),"\n",(0,i.jsx)(n.h3,{id:"interacting-with-code-review",children:"Interacting with code review"}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsxs)(n.p,{children:["In order to interact with GitHub for code review in ISL, be sure to install the ",(0,i.jsx)(n.code,{children:"gh"})," GitHub CLI. ",(0,i.jsx)(n.a,{href:"/docs/git/intro",children:"Learn more."})]})}),"\n",(0,i.jsxs)(n.p,{children:["ISL considers code review an integral part of the source control workflow. When making commits, you usually want to submit it for review.\nIn the commit form on the right, ISL has a button to ",(0,i.jsx)(n.em,{children:"Commit and Submit"}),", as well as ",(0,i.jsx)(n.em,{children:"Amend and Submit"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"These will run a submit command on your stack of commits to submit them for code review on GitHub."}),"\n",(0,i.jsxs)(n.p,{children:["You have two options for which command to use to submit for GitHub, ",(0,i.jsx)(a.Xj,{name:"ghstack"})," and ",(0,i.jsx)(a.Xj,{name:"pr"}),".\nISL will prompt you for your choice the first time you try to submit. This can also be controlled by setting ",(0,i.jsx)(n.code,{children:"github.preferred_submit_command"})," to ",(0,i.jsx)(n.code,{children:"ghstack"})," or ",(0,i.jsx)(n.code,{children:"pr"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"sl config --local github.preferred_submit_command <ghstack or pr>\n"})}),"\n",(0,i.jsxs)(n.p,{children:["See documentation on ",(0,i.jsx)(n.a,{href:"/docs/git/intro",children:"Using Sapling with GitHub"})," for more information."]}),"\n",(0,i.jsx)(a.RJ,{alt:"Pull Request Badges",light:"/img/isl/pr_light.png",dark:"/img/isl/pr_dark.png"}),"\n",(0,i.jsxs)(n.p,{children:["Commits in your tree which are associated with a GitHub Pull Request will show a badge underneath showing the status of that Pull Request.\nYou can click this badge to open the Pull Request in GitHub (or ",(0,i.jsx)(n.a,{href:"/docs/introduction/getting-started#browsing-pull-requests",children:"configure it to open alternate domains"}),")."]}),"\n",(0,i.jsx)(n.p,{children:"This badge also shows the CI build status and how many comments there are."}),"\n",(0,i.jsx)(n.h3,{id:"resolving-merge-conflicts",children:"Resolving merge conflicts"}),"\n",(0,i.jsxs)(n.p,{children:["Running some commands like ",(0,i.jsx)(a.Xj,{name:"rebase"})," can sometimes lead to merge conflicts. When merge conflicts are detected, ISL will\nchange the list of uncommitted changes into a list of unresolved conflicts."]}),"\n",(0,i.jsx)(a.RJ,{alt:"Merge Conflicts",light:"/img/isl/conflicts_light.png",dark:"/img/isl/conflicts_dark.png"}),"\n",(0,i.jsx)(n.p,{children:"After opening each file and resolving the conflict markers,\nyou can click the checkmark next to each file in ISL to mark it as resolved.\nWhen all files have been resolved, you are free to continue the command that led to conflicts."}),"\n",(0,i.jsx)(n.p,{children:"It is possible to hit merge conflicts multiple times, for example, when rebasing an entire stack of commits, as each commit is checked for conflicts one-by-one."}),"\n",(0,i.jsx)(a.RJ,{alt:"Resolved Merge Conflicts",light:"/img/isl/conflicts_resolved_light.png",dark:"/img/isl/conflicts_resolved_dark.png"}),"\n",(0,i.jsx)(n.h3,{id:"comparing-changes",children:"Comparing changes"}),"\n",(0,i.jsxs)(n.p,{children:["ISL includes a comparison view to quickly see all your changes, similar to  ",(0,i.jsx)(a.Xj,{name:"diff"}),"\nOne common use case is to look over all your uncommitted local changes before you submit them for code review."]}),"\n",(0,i.jsxs)(n.p,{children:["Just above your uncommitted changes, there's a ",(0,i.jsx)(n.code,{children:"View Changes"})," button to open the comparison view in Uncommitted Changes mode.\nIn the comparison view, you'll see a split diff view of each file you've changed. You can also access this view with the shortcut ",(0,i.jsx)(n.code,{children:"Command+'"}),"."]}),"\n",(0,i.jsx)(a.RJ,{alt:"Comparison View",light:"/img/isl/comparison_light.png",dark:"/img/isl/comparison_dark.png"}),"\n",(0,i.jsx)(n.p,{children:"The comparison view supports other comparisons as well."}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Uncommitted Changes"}),": As mentioned, shows changes to your working copy that haven't been committed or amended yet. This is all the changes of the files ",(0,i.jsx)(n.code,{children:"sl status"})," shows by default. Shortcut: ",(0,i.jsx)(n.code,{children:"Command+'"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Head Changes"}),": Shows all the changes in the current commit, plus any uncommitted changes on top of that. Useful to see what the most recent commit will look like after amending. Shortcut: ",(0,i.jsx)(n.code,{children:"Command+Shift+'"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Stack Changes"}),": Shows all the changes in your stack of commits going back to the main branch, plus any uncommitted changes. Useful to see absolutely everything you've changed."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Committed Changes"}),': Shows the changes in a specific commit. This is accessible by selecting a commit then clicking on "View Changes in <hash>". Unlike the other comparisons, this does not include your uncommitted changes.']}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["The comparison view is currently ",(0,i.jsx)(n.em,{children:"read-only"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"speeding-up-change-detection-with-watchman",children:"Speeding up change detection with Watchman"}),"\n",(0,i.jsxs)(n.p,{children:["In order to detect when files have changed in your repository, ISL must occasionally run ",(0,i.jsx)(n.code,{children:"sl"})," commands to check for changes.\nTo reduce resource usage and speed up how quickly changes are detected, ISL can optionally use ",(0,i.jsx)(n.a,{href:"https://facebook.github.io/watchman/",children:"Watchman"}),", a file watching service.\nIf Watchman is installed on your path, it will automatically be used.\nNote that your repository must also have a ",(0,i.jsx)(n.a,{href:"https://facebook.github.io/watchman/docs/config.html",children:(0,i.jsx)(n.code,{children:".watchmanconfig"})})," in the root directory to make use of this feature."]}),"\n",(0,i.jsx)(n.h2,{id:"connecting-to-isl-running-on-another-machine",children:"Connecting to ISL running on another machine"}),"\n",(0,i.jsx)(n.p,{children:"If you are using Sapling on a remote machine, but want to use ISL, you have two options:"}),"\n",(0,i.jsx)(n.h3,{id:"host-with-available-ports",children:"Host with available ports"}),"\n",(0,i.jsxs)(n.p,{children:["If you are using Sapling on a remote machine that is able to open ports to the outside world, choose a port like ",(0,i.jsx)(n.code,{children:"5000"})," and pass it as the ",(0,i.jsx)(n.code,{children:"-p"})," argument to ",(0,i.jsx)(n.code,{children:"web"})," when launching it on the remote host:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"alyssa@example.com:/home/alyssa/sapling$ sl isl --no-open -p 5000\nlaunching web server for Interactive Smartlog...\nListening on http://localhost:5000/?token=a6d646073f28ef2fd09a89bed93e89f4&cwd=%2Fhome%2Falyssa%2Fsapling\nServer logs will be written to /dev/shm/tmp/isl-server-logqrqvvN/isl-server.log\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Assuming your remote hostname is ",(0,i.jsx)(n.code,{children:"example.com"}),", take the URL that ",(0,i.jsx)(a.Xj,{name:"web"})," printed out and replace ",(0,i.jsx)(n.code,{children:"localhost"})," with the hostname like so:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"http://example.com:5000/?token=a6d646073f28ef2fd09a89bed93e89f4&cwd=%2Fhome%2Falyssa%2Fsapling\n"})}),"\n",(0,i.jsx)(n.p,{children:"You should be able to open this URL in your local browser to access ISL."}),"\n",(0,i.jsx)(n.h3,{id:"host-with-no-available-ports",children:"Host with no available ports"}),"\n",(0,i.jsxs)(n.p,{children:["If you are running Sapling on a host where you do not have permissions to open ports to the outside world, you may be able to leverage ",(0,i.jsx)(n.em,{children:"SSH port forwarding"})," to access ISL."]}),"\n",(0,i.jsx)(n.p,{children:"On the server:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"alyssa@example.com:/home/alyssa/sapling$ sl isl --no-open -p 5000\nlaunching web server for Interactive Smartlog...\nListening on http://localhost:5000/?token=a6d646073f28ef2fd09a89bed93e89f4&cwd=%2Fhome%2Falyssa%2Fsapling\nServer logs will be written to /dev/shm/tmp/isl-server-logqrqvvN/isl-server.log\n"})}),"\n",(0,i.jsx)(n.p,{children:"On your local machine where you have SSH access to the server:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"ssh -L 4000:localhost:5000 -N alyssa@example.com\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Note that this command will stay running in the foreground so long as you remain connected to the remote host. If you lose the connection (perhaps because your computer has gone to sleep), then you will have to run the ",(0,i.jsx)(n.code,{children:"ssh"})," command again to re-establish the connection."]}),"\n",(0,i.jsxs)(n.p,{children:["Then take the original URL that you saw on the server and change the port from ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"5000"})})," to ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"4000"})})," before trying to open it on your local machine:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"http://localhost:4000/?token=a6d646073f28ef2fd09a89bed93e89f4&cwd=%2Fhome%2Falyssa%2Fsapling\n"})})]})}function m(e={}){let{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},26702:function(e,n,t){t.d(n,{RJ:function(){return c},Xj:function(){return r},bv:function(){return l},mY:function(){return a},nk:function(){return h}});var o=t(85893);t(67294);var i=t(4757),s=t(37308);function a(e){let{name:n,linkText:t}=e,s=function(e){switch(e){case"go":return"goto";case"isl":return"web"}return e}(n),a=t??n;return(0,o.jsx)("a",{href:(0,i.default)(`/docs/commands/${s}`),children:(0,o.jsx)("code",{children:a})})}function r(e){let{name:n}=e;return(0,o.jsx)(a,{name:n,linkText:`sl ${n}`})}function l(){return(0,o.jsx)("p",{style:{textAlign:"center"},children:(0,o.jsx)("img",{src:(0,i.default)("/img/reviewstack-demo.gif"),width:800,align:"center"})})}function c(e){let{alt:n,light:t,dark:a}=e;return(0,o.jsx)(s.Z,{alt:n,sources:{light:(0,i.default)(t),dark:(0,i.default)(a)}})}function h(e){let{src:n}=e;return(0,o.jsx)("video",{controls:!0,children:(0,o.jsx)("source",{src:(0,i.default)(n)})})}},50065:function(e,n,t){t.d(n,{Z:function(){return r},a:function(){return a}});var o=t(67294);let i={},s=o.createContext(i);function a(e){let n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);