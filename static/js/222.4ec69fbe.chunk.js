(globalThis.webpackChunkReviewStack=globalThis.webpackChunkReviewStack||[]).push([[222],{222:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>j});var n=i(7878),o=i(5083),s=i(8096),a=i(742),r=i(7823),c=i(1527);const h={opacity:.5,transition:"opacity 200ms cubic-bezier(0.08,0.52,0.52,1)",":hover":{opacity:1}};function l(){const e="day"===(0,a.useRecoilValue)(c.x)?"/meta_opensource_logo.svg":"/meta_opensource_logo_negative.svg";return(0,n.jsx)(o.Z,{as:"footer",backgroundColor:"canvas.subtle",flex:"0 0 auto",paddingTop:4,bottom:0,width:"100%",children:(0,n.jsxs)(o.Z,{margin:"auto",width:[500,800],paddingTop:2,paddingLeft:4,children:[(0,n.jsxs)(o.Z,{display:"flex",flexDirection:["row"],justifyContent:"space-between",children:[(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(u,{text:"Project Links"}),[{text:"GitHub Repository",href:"https://github.com/facebook/sapling/tree/main/eden/contrib/reviewstack"},{text:"Sapling SCM",href:"https://sapling-scm.com"},{text:"Meta Open Source",href:"https://opensource.fb.com"}].map((e=>(0,n.jsx)(d,{...e},e.href)))]}),(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(u,{text:"Legal"}),[{text:"Meta Open Source - Privacy Policy",href:"https://opensource.fb.com/legal/privacy"},{text:"Meta Open Source - Terms of Use",href:"https://opensource.fb.com/legal/terms"},{text:"GitHub Privacy Statement",href:"https://docs.github.com/en/site-policy/privacy-policies/github-privacy-statement"},{text:"GitHub Terms of Service",href:"https://docs.github.com/en/site-policy/github-terms/github-terms-of-service"},{text:"Netlify Privacy Policy",href:"https://www.netlify.com/privacy/"}].map((e=>(0,n.jsx)(d,{...e},e.href)))]})]}),(0,n.jsx)(o.Z,{textAlign:["left","center"],children:(0,n.jsx)(s.Z,{sx:h,children:(0,n.jsx)("a",{href:"https://opensource.fb.com",target:"_blank",children:(0,n.jsx)("img",{src:e,width:"480px",alt:"Meta Open Source Logo"})})})})]})})}function u(e){let{text:t}=e;return(0,n.jsx)(o.Z,{paddingBottom:1,children:(0,n.jsx)(s.Z,{fontWeight:"bold",children:t})})}function d(e){let{text:t,href:i}=e;return(0,n.jsx)(o.Z,{children:(0,n.jsx)(r.Z,{href:i,children:t})})}function p(e){let{children:t}=e;return(0,n.jsx)(s.Z,{bg:"neutral.muted",sx:{borderRadius:"6px"},fontFamily:"ui-monospace, SFMono-Regular, SF Mono, Menlo, Consolas, Liberation Mono, monospace",fontSize:"85%",padding:"0.2em 0.4em",lineHeight:"1.5",children:t})}var f=i(7158),g=i(5707),b=i(7150),m=i(5438),x=i.n(m),w=i(1024),v=i(9404);const y=["user","repo"].join(" ");function j(e){return(0,n.jsxs)(o.Z,{display:"flex",flexDirection:"column",height:"100vh",children:[(0,n.jsx)(o.Z,{flex:"0 0 auto",children:(0,n.jsx)(v.Z,{orgAndRepo:null})}),(0,n.jsx)(o.Z,{flex:"1 1 auto",overflowY:"auto",children:(0,n.jsxs)(o.Z,{display:"flex",flexDirection:["column","row"],justifyContent:"space-between",paddingX:3,paddingY:2,children:[(0,n.jsx)(o.Z,{minWidth:300,maxWidth:800,children:(0,n.jsx)(k,{...e})}),(0,n.jsxs)(o.Z,{children:[(0,n.jsx)("img",{src:"/reviewstack-demo.gif",width:800}),(0,n.jsx)(o.Z,{textAlign:"center",width:800,children:(0,n.jsxs)(s.Z,{fontStyle:"italic",fontSize:1,children:["ReviewStack makes it possible to view code and the timeline side-by-side",(0,n.jsx)("br",{}),"in addition to facilitating navigation up and down the stack."]})})]})]})}),(0,n.jsx)(l,{})]})}function k(e){const{setTokenAndHostname:t}=e,[i,a]=(0,w.useState)(!1),[c,h]=(0,w.useState)(null),l=(0,w.useCallback)((async()=>{a(!0);try{const e=await new Promise(((e,t)=>{new(x())({}).authenticate({provider:"github",scope:y},((i,n)=>{if(i)t(i);else{const i=null===n||void 0===n?void 0:n.token;"string"===typeof i?e(i):t(new Error("token missing in OAuth response"))}}))}));t(e,"github.com")}catch(e){const t=e instanceof Error?e.message:"error fetching OAuth token";h(t)}a(!1)}),[a,h,t]);return(0,n.jsxs)(o.Z,{children:[(0,n.jsx)(f.Z,{children:"Welcome to ReviewStack"}),(0,n.jsxs)(o.Z,{children:[(0,n.jsxs)(s.Z,{as:"p",pb:2,children:[(0,n.jsx)(r.Z,{href:"https://sapling-scm.com/docs/addons/reviewstack",children:"ReviewStack"})," is a novel user interface for GitHub pull requests with custom support for"," ",(0,n.jsx)(s.Z,{fontStyle:"italic",children:"stacked changes"}),". For tools like"," ",(0,n.jsx)(r.Z,{href:"http://sapling-scm.com/",children:"Sapling"})," or"," ",(0,n.jsx)(r.Z,{href:"https://github.com/ezyang/ghstack",children:"ghstack"})," that create separate pull requests for independent commits in a stack, ReviewStack facilitates navigating the stack and ensuring that only the code that was meant to be considered for review is displayed for each pull request."]}),(0,n.jsxs)(s.Z,{as:"p",children:["ReviewStack (reviewstack.dev) is owned and operated by Meta Platforms, Inc. Note that"," ",(0,n.jsx)(r.Z,{href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/authorizing-oauth-apps",children:"you must authorize ReviewStack to access your GitHub data"})," ","in order to use ReviewStack. Once authorized, ReviewStack will store your GitHub access token, and other data fetched from GitHub, locally in the browser. Clicking"," ",(0,n.jsx)(s.Z,{fontWeight:"bold",children:"Logout"})," will remove the data that is stored locally, but it will not delete your data from GitHub."]})]}),null!=c?(0,n.jsx)(o.Z,{pb:2,children:(0,n.jsx)(s.Z,{color:"danger.fg",children:c})}):null,(0,n.jsx)(S,{children:"github.com Users"}),(0,n.jsx)(o.Z,{pb:4,children:"To view code hosted on github.com using ReviewStack, you can use the OAuth flow below to authenticate with GitHub:"}),(0,n.jsx)(o.Z,{pb:4,children:(0,n.jsx)(g.zx,{onClick:l,disabled:i,children:"Use OAuth to Authorize ReviewStack to access GitHub"})}),(0,n.jsx)(S,{children:"GitHub Enterprise Users"}),(0,n.jsxs)(o.Z,{pb:4,children:["To use ReviewStack to view code on your ",(0,n.jsx)(s.Z,{fontWeight:"bold",children:"GitHub Enterprise"})," ","account, you must specify the hostname along with a"," ",(0,n.jsx)(r.Z,{href:"https://docs.github.com/en/authentication/keeping-your-account-and-data-secure/creating-a-personal-access-token",children:"Personal Access Token (PAT)"})," ","for the account. If you have authenticated with the"," ",(0,n.jsx)(r.Z,{href:"https://cli.github.com/",children:"GitHub CLI"}),", you can use"," ",(0,n.jsx)(p,{children:"gh auth status --show-token --hostname HOSTNAME"})," to use your existing token, though note the PAT for ",(0,n.jsx)(p,{children:"gh"})," may have access to a broader set of"," ",(0,n.jsx)(r.Z,{href:"https://docs.github.com/en/developers/apps/building-oauth-apps/scopes-for-oauth-apps",children:"scopes"})," ","than you may be willing to grant to a third-party tool."]}),(0,n.jsx)(Z,{...e}),(0,n.jsx)(S,{children:"Building From Source"}),(0,n.jsxs)(o.Z,{children:["Finally, if you want to run your own instance of ReviewStack,"," ",(0,n.jsx)(r.Z,{href:"https://github.com/facebook/sapling/tree/main/eden/contrib/reviewstack",children:"the source code is available on GitHub"}),". For example, you may want to deploy your own instance of ReviewStack that is hardcoded to work with your GitHub Enterprise instance combined with an in-house SSO login flow. The codebase is designed so that the ReviewStack UI can be used as a reusable React component with minimal dependencies on the host environment."]})]})}function Z(e){let{setTokenAndHostname:t}=e;const[i,s]=(0,w.useState)("github.com"),[a,r]=(0,w.useState)(""),c=(0,w.useCallback)((e=>s(e.target.value)),[]),h=(0,w.useCallback)((e=>r(e.target.value)),[]),l=(0,w.useCallback)((e=>(e.preventDefault(),t(a.trim(),i.trim()),!1)),[a,i,t]),u=function(e,t){if(""===e.trim())return!1;const i=t.trim();return""!==i&&-1!==i.indexOf(".")}(a,i);return(0,n.jsx)(o.Z,{children:(0,n.jsxs)("form",{onSubmit:l,children:[(0,n.jsxs)(o.Z,{pb:2,children:["GitHub Enterprise Hostname: ",(0,n.jsx)("br",{}),(0,n.jsx)(b.Z,{value:i,onChange:c,sx:{width:"400px"},monospace:!0,"aria-label":"hostname",placeholder:"github.com"})]}),(0,n.jsxs)(o.Z,{children:["Personal Access Token: ",(0,n.jsx)("br",{}),(0,n.jsx)(b.Z,{value:a,onChange:h,type:"password",sx:{width:"400px"},monospace:!0,"aria-label":"personal access token",placeholder:"github_pat_abcdefg123456789"})]}),(0,n.jsx)(o.Z,{paddingY:4,children:(0,n.jsx)(g.zx,{disabled:!u,type:"submit",children:"Use your GitHub Enterprise account with ReviewStack"})})]})})}function S(e){let{children:t}=e;return(0,n.jsx)(f.Z,{as:"h3",sx:{fontSize:3,mb:2},children:t})}},5438:function(e,t){var i,n,o;n=[t],i=function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),n="https://api.netlify.com",o=function(){function e(i){t(this,e),this.err=i}return i(e,[{key:"toString",value:function(){return this.err&&this.err.message}}]),e}(),s={github:{width:960,height:600},gitlab:{width:960,height:600},bitbucket:{width:960,height:500},email:{width:500,height:400}},a=function(){function e(i){t(this,e),this.site_id=i.site_id,this.base_url=i.base_url||n}return i(e,[{key:"handshakeCallback",value:function(e,t){var i=this;return function n(o){if(o.data==="authorizing:"+e.provider&&o.origin===i.base_url)return window.removeEventListener("message",n,!1),window.addEventListener("message",i.authorizeCallback(e,t),!1),i.authWindow.postMessage(o.data,o.origin)}}},{key:"authorizeCallback",value:function(e,t){var i=this;return function n(s){var a,r;s.origin===i.base_url&&(0===s.data.indexOf("authorization:"+e.provider+":success:")&&(a=JSON.parse(s.data.match(new RegExp("^authorization:"+e.provider+":success:(.+)$"))[1]),window.removeEventListener("message",n,!1),i.authWindow.close(),t(null,a)),0===s.data.indexOf("authorization:"+e.provider+":error:")&&(r=JSON.parse(s.data.match(new RegExp("^authorization:"+e.provider+":error:(.+)$"))[1]),window.removeEventListener("message",n,!1),i.authWindow.close(),t(new o(r))))}}},{key:"getSiteID",value:function(){if(this.site_id)return this.site_id;var e=document.location.host.split(":")[0];return"localhost"===e?null:e}},{key:"authenticate",value:function(e,t){var i,n,a,r=this.getSiteID(),c=e.provider;if(!c)return t(new o({message:"You must specify a provider when calling netlify.authenticate"}));if(!r)return t(new o({message:'You must set a site_id with netlify.configure({site_id: "your-site-id"}) to make authentication work from localhost'}));var h=s[c]||s.github;i=screen.width/2-h.width/2,n=screen.height/2-h.height/2,window.addEventListener("message",this.handshakeCallback(e,t),!1),a=this.base_url+"/auth?provider="+e.provider+"&site_id="+r,e.scope&&(a+="&scope="+e.scope),!0===e.login&&(a+="&login=true"),e.beta_invite&&(a+="&beta_invite="+e.beta_invite),e.invite_code&&(a+="&invite_code="+e.invite_code),this.authWindow=window.open(a,"Netlify Authorization","toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+h.width+", height="+h.height+", top="+n+", left="+i+");"),this.authWindow.focus()}}]),e}();e.default=a},void 0===(o="function"===typeof i?i.apply(t,n):i)||(e.exports=o)}}]);
//# sourceMappingURL=222.4ec69fbe.chunk.js.map