// @generated SignedSource<<723755a6bbf9829b4636e8b105680d83>>
// DO NOT EDIT THIS FILE MANUALLY!
// This file is a mechanical copy of the version in the configerator repo. To
// modify it, edit the copy in the configerator repo instead and copy it over by
// running the following in your fbcode directory:
//
// configerator-thrift-updater scm/mononoke/load_limiter/load_limiter.thrift
include "thrift/annotation/rust.thrift"

@rust.Exhaustive
struct ODSQuery {
  1: string entity;
  2: string key;
  3: optional string reduce;
  4: optional string transform;
}

enum RejectionCriteria {
  // Reject  if the metric value is above the specified threshold
  REJECT_ABOVE_THRESHOLD = 1,
  // Reject  if the metric value is below the specified threshold
  REJECT_BELOW_THRESHOLD = 2,
}

@rust.Exhaustive
struct LoadLimiterRule {
  // The ODS query to use for this rule
  1: ODSQuery query;
  // The threshold value for this rule
  2: double limit;
  // The rejection criteria to apply for this rule
  3: RejectionCriteria criteria;
}

@rust.Exhaustive
struct LoadLimiterConfig {
  1: list<LoadLimiterRule> rules;
}
