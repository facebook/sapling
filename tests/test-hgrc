#!/bin/sh

mkdir t
cd t
hg init
echo "invalid" > .hg/hgrc
hg status 2>&1 |sed -e "s:/.*\(/t/.*\):...\1:"

#issue 1199, escaping

cd ..
hg init "foo%bar"
hg clone "foo%bar" foobar
p=`pwd`
cd foobar
cat .hg/hgrc |sed -e "s:$p:...:"
hg paths |sed -e "s:$p:...:"
hg showconfig |sed -e "s:$p:...:"

# issue1829: wrong indentation
cd ..
echo '[foo]' >> $HGRCPATH
echo '  x = y' >> $HGRCPATH
hg version 2>&1 | sed -e "s|$HGRCPATH|\$HGRCPATH|"

python -c "print '[foo]\nbar = a\n b\n c \n  de\n fg \nbaz = bif cb \n'" \
    > $HGRCPATH
hg showconfig foo

echo '%include /no-such-file' > $HGRCPATH
hg version 2>&1 | sed -e "s|$HGRCPATH|\$HGRCPATH|"
