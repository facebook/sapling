#!/bin/sh
hg --debug init
echo this is a1 > a
hg add a
hg commit -m0 -d "0 0"
echo this is b1 > b
hg add b
hg commit -m1 -d "0 0"
hg manifest 1
echo this is c1 > c
hg rawcommit -p 1 -d "0 0" -m2 c
hg manifest 2
hg parents
rm b
hg rawcommit -p 2 -d "0 0" -m3 b
hg manifest 3
hg parents
echo this is a22 > a
hg rawcommit -p 3 -d "0 0" -m4 a
hg manifest 4
hg parents
echo this is c22 > c
hg rawcommit -p 1 -d "0 0" -m5 c
hg manifest 5
hg parents
# merge, but no files changed
hg rawcommit -p 4 -p 5 -d "0 0" -m6
hg manifest 6
hg parents
# no changes what-so-ever
hg rawcommit -p 6 -d "0 0" -m7
hg manifest 7
hg parents
