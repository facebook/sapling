Initialized empty Git repository in gitsubrepo/.git/

Initialized empty Git repository in gitrepo1/.git/

Cloning into 'subrepo1'...
done.
Cloning into 'xyz/subrepo2'...
done.

% Ensure gitlinks are transformed to .hgsubstate on hg pull from git
importing git objects into hg
updating to branch default
cloning subrepo subrepo1 from git://localhost/gitsubrepo
cloning subrepo xyz/subrepo2 from git://localhost/gitsubrepo
4 files updated, 0 files merged, 0 files removed, 0 files unresolved
% .hgsub shall list two [git] subrepos
subrepo1 = [git]../gitsubrepo
xyz/subrepo2 = [git]../gitsubrepo
% .hgsubstate shall list two idenitcal revisions
56f0304c5250308f14cfbafdc27bd12d40154d17 subrepo1
56f0304c5250308f14cfbafdc27bd12d40154d17 xyz/subrepo2
% hg status shall NOT report .hgsub and .hgsubstate as untracked - either ignored or unmodified

% Check gitmodules are preserved during hg push to git
From git://localhost/gitsubrepo
   56f0304..aabf7cd  master     -> origin/master
Updating 56f0304..aabf7cd
Fast-forward
 gamma |    1 +
 1 file changed, 1 insertion(+)
 create mode 100644 gamma
pushing to git://localhost/gitrepo1
exporting hg objects to git
creating and sending data
    default::refs/heads/master => GIT:4663c492
% there shall be two gitlink entries, with values matching that in .hgsubstate
160000 commit 56f0304c5250308f14cfbafdc27bd12d40154d17	subrepo1
160000 commit aabf7cd015089aff0b84596e69aa37b24a3d090a	xyz/subrepo2
HEAD is now at 4663c49 Update subrepo2 from hg

Check .hgsub and .hgsubstate from git repository are merged, not overwritten
pulling from git://localhost/gitrepo1
importing git objects into hg
(run 'hg update' to get a working copy)
cloning subrepo hgsub from TEMPLOCATION/hgsub
2 files updated, 0 files merged, 0 files removed, 0 files unresolved
% pull shall bring .hgsub entry which was added to the git repo
hgsub = TEMPLOCATION/hgsub
subrepo1 = [git]../gitsubrepo
xyz/subrepo2 = [git]../gitsubrepo
% .hgsubstate shall list revision of the subrepo added through git repo
481ec30d580f333ae3a77f94c973ce37b69d5bda hgsub
56f0304c5250308f14cfbafdc27bd12d40154d17 subrepo1
aabf7cd015089aff0b84596e69aa37b24a3d090a xyz/subrepo2
