/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

.drawers {
  display: flex;
  flex-direction: column;
  overflow: hidden;
  width: 100%;
  height: 100%;

  /* Graphite color scheme - deep navy background */
  background-color: var(--graphite-bg);
  color: var(--graphite-text-primary);

  /* Layout spacing tokens for breathing room */
  --drawer-padding: 16px;
  --section-gap: 12px;
  --item-padding: 8px;
  --prominent-padding: 20px;

  /* Sizing tokens */
  --drag-handle-size: 7px;
  --drawer-label-size: 28px; /* Ensure label text is always visible */
  --min-pane-width: 200px; /* Minimum readable width for drawer content */
}
.drawers-horizontal {
  display: flex;
  flex-direction: row;
  overflow: hidden;
  width: 100%;
  height: 100%;
  /* Allow shrinking below content size for proper overflow behavior */
  min-height: 0;
}

/* actual content takes remaining space after label and resize handle */
.drawer-left > div:nth-child(3),
.drawer-right > div:nth-child(3) {
  flex: 1;
  min-width: 0; /* Allow content to shrink below its content size */
  min-height: 0; /* Critical: allows flex child to scroll */
  overflow-y: auto; /* Allow vertical scrolling */
  overflow-x: hidden; /* Prevent horizontal scroll */
  /* Consistent padding for drawer content areas */
  padding: var(--drawer-padding);
}
.drawer-top > div:nth-child(3),
.drawer-bottom > div:nth-child(3) {
  flex: 1;
  min-height: 0; /* Allow content to shrink below its content size */
  overflow: hidden;
  /* Consistent padding for drawer content areas */
  padding: var(--drawer-padding);
}

.drawer-main-content {
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
  width: 100%;
  /* Allow shrinking below content size for proper overflow/scroll behavior */
  min-height: 0;
  /* Extra breathing room for the prominent middle column */
  padding: var(--prominent-padding);
  /* Unified Graphite background */
  background-color: var(--graphite-bg);
  /* Subtle borders for section separation */
  border-left: 1px solid var(--graphite-border);
  border-right: 1px solid var(--graphite-border);
  /* Scroll fade configuration */
  --scroll-fade-color: var(--graphite-bg);
}

.drawer {
  display: flex;
  flex: none;
  overflow: hidden; /* Don't scroll at drawer level - content scrolls */
  justify-content: flex-end;
  /* Unified Graphite background across all columns */
  background-color: var(--graphite-bg);
  /* Scroll fade configuration */
  --scroll-fade-color: var(--graphite-bg);
}

.drawer.drawer-top {
  flex-direction: column-reverse;
}
.drawer.drawer-left {
  flex-direction: row-reverse;
}
.drawer.drawer-bottom {
  flex-direction: column;
}
.drawer.drawer-right {
  flex-direction: row;
}
.drawer-expanded.drawer-top,
.drawer-expanded.drawer-bottom {
  min-height: calc(var(--pad) + var(--drag-handle-size) + var(--drawer-label-size));
}

.drawer-expanded.drawer-right,
.drawer-expanded.drawer-left {
  min-width: calc(var(--pad) + var(--drag-handle-size) + var(--drawer-label-size));
}

.drawer.drawer-expanded.drawer-left {
  min-width: var(--min-pane-width);
  /* Leave room for middle content + right drawer minimum */
  max-width: calc((100vw / var(--zoom)) - 2 * var(--min-pane-width) - 100px);
}

.drawer.drawer-expanded.drawer-right {
  min-width: var(--min-pane-width);
  /* Leave room for middle content + left drawer minimum */
  max-width: calc((100vw / var(--zoom)) - 2 * var(--min-pane-width) - 100px);
}
.drawer.drawer-expanded.drawer-top {
  min-height: var(--min-pane-width);
  max-height: calc((100vw / var(--zoom)) - var(--min-pane-width));
}

.drawer .resizable-drag-handle {
  border: 1px solid var(--graphite-border);
  user-select: none;
  flex-shrink: 0;
}

.drawer-top .resizable-drag-handle,
.drawer-bottom .resizable-drag-handle {
  min-height: calc(var(--drag-handle-size) - (2 * 1px)); /* 2px for border */
  width: 100%;
  border-left-width: 0;
  border-right-width: 0;
  cursor: ns-resize;
}

.drawer-left .resizable-drag-handle,
.drawer-right .resizable-drag-handle {
  min-width: calc(var(--drag-handle-size) - (2 * 1px)); /* 2px for border */
  height: 100%;
  border-top-width: 0;
  border-bottom-width: 0;
  cursor: ew-resize;
}

.drawer .resizable-drag-handle:hover,
.drawer .resizable-drag-handle.resizing {
  background-color: var(--graphite-accent);
  border-color: var(--graphite-accent);
  box-shadow: 0 0 8px var(--graphite-glow, rgba(74, 144, 226, 0.3));
  transition:
    background-color 0.15s var(--ease-in-out-smooth, ease) 150ms,
    border-color 0.15s var(--ease-in-out-smooth, ease) 150ms,
    box-shadow 0.2s var(--ease-in-out-smooth, ease) 150ms;
}

.drawer-label {
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  border: 0px solid var(--graphite-border);
  cursor: pointer;
  padding: var(--item-padding);
  gap: var(--halfpad);
  transition:
    background-color 0.15s var(--ease-in-out-smooth, ease),
    box-shadow 0.2s var(--ease-in-out-smooth, ease),
    backdrop-filter 0.2s var(--ease-in-out-smooth, ease);
}
.drawer-label:hover {
  background-color: color-mix(in srgb, var(--graphite-hover-bg) 70%, transparent);
  box-shadow: 0 0 8px var(--graphite-glow, rgba(74, 144, 226, 0.15));
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
}

.drawer-label:active {
  background-color: var(--graphite-selected-bg, rgba(74, 144, 226, 0.15));
}

.drawer-left .drawer-label {
  border-left-width: 1px;
}
.drawer-right .drawer-label {
  border-right-width: 1px;
}
.drawer-top .drawer-label {
  border-bottom-width: 1px;
}
.drawer-bottom .drawer-label {
  border-top-width: 1px;
}

.drawer-left .drawer-label,
.drawer-right .drawer-label {
  width: var(--drawer-label-size);
  min-width: var(--drawer-label-size);
  flex-shrink: 0;
}
.drawer-top .drawer-label,
.drawer-bottom .drawer-label {
  height: var(--drawer-label-size);
  min-height: var(--drawer-label-size);
  flex-shrink: 0;
}

.drawer-left .drawer-label,
.drawer-right .drawer-label {
  writing-mode: vertical-lr;
  transform: rotate(180deg);
}
